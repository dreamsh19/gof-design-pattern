---
created: 2025-01-13 (월) 00:04:23
modified: 2025-01-17 (금) 21:47:24
---
- 문서는 본질적으로 요소의 배열(arrangement)이라고 볼 수 있다.
	- 이때 원시적인 문자, 선, 다각형 등이 graphical 요소이다.
	- 그리고 눈에 보이지 않지만 구조적 요소(행, 열 등)나
	- 복잡한 요소들(표, 다이어그램 등)도 요소가 될 수 있다.
		- 유저는 복잡한 요소들도 통으로 하나로 처리할 수 있어야한다.
		- (다이어그램을 하나의 조각조각으로 쪼갤 것이 아니라)
- 그럼 기본단위가 되는 이 요소를 어떻게 정의하는게 좋을까?
- 요소(문서의 내부 표현 단위, internal representation)는 아래 기능이 필요하다.
	- 물리적인 구조 유지
	- 시각적으로 표현이 가능해야한다.
	- 물리적인 위치 좌표를 지원해야한다.
	- 텍스트와 그래픽을 uniform하게 취급해야한다. (하나의 동일한 메커니즘으로 둘다 처리할 수 있어야한다.)
		- 그래픽을 텍스트의 특이 케이스가 아니어야한다. vice versa
		- 3번째 라인 1번째 요소가 문자 c가 될 수도 있고, 이미지가 될 수 있다.
	- 단일 요소와 복합 요소를 uniform하게 처리해야한다.
		- 복합 요소 = set of 단일 요소
		- 3번째 라인 1번째 요소가 문자 c가 될 수도 있고, 복잡한 테이블이 될 수 있다.
		- 요소는 결국 draw itslef하고 specify its dimensions한게 중요한거고, 그 복잡도는 전혀 상관이 없다.
- 하지만 당연하게도 요소 클래스간 차이는 있어야한다.
	- 예를 들면, 문자의 표현방식과 표의 표현방식은 다르다.
	- 각각 구현 클래스에서 실제로 구현의 차이를 두어야하는 부분.

## Recursive Composition

계층 구조를 표현하는 가장 일반적인 방법 중 하나가 Recursive composition이다.

![Image](https://github.com/user-attachments/assets/33156f77-6bfa-4db6-b721-4179f8e2b63c)

요소를 조합하여 문서를 구성할 수 있다.
이 때 요소는 두 가지가 필요하다.
1. 각 객체에 해당하는 구현 클래스가 필요하다.
2. 일관되게(호환성을 갖는) 처리하기 위한 인터페이스가 필요하다.

> We can treat text and graphics uniformly with respect to how they are drawn, formatted, and embedded within each other

## Glyph

위에서 말한 "요소"에 대응되는 것이 Glyph이다.
> **Glyph** : abstract class for all objects that can appear in a document structure
- 문서에 물리적 구조에 등장할 수 있는 요소를 추상화한 인터페이스.
	- primitive 그래픽 요소(문자, 이미지) + 구조적 요소(행, 열) 모두 Glyph의 구현체이다.
- 그리고 세가지 기능을 지원한다. ( 세가지 책임을 갖는다 )
	- 1. how to draw themselves (apperance)
	- 2. what space they occupy (hit detection)
	- 3. their children and parent (structure)

![Image](https://github.com/user-attachments/assets/442b64e9-9e50-4fcf-bf73-3c55623b470b)



- 언어 레벨에서 정의한 인터페이스

![Image](https://github.com/user-attachments/assets/f64cc0e6-45cd-48cf-9552-c8ca22c16b08)

---

## Composite 패턴

> The Composite pattern captures the essence of recursive composition in object-oriented terms.

Composite 패턴은 객체 지향적으로 재귀적 합성을 표현하기 위한 좋은 방법이다.
재귀적 합성은 결국 계층 구조에서 자식이 스스로와 같은 인터페이스여야 하는데, Composite 패턴은 이를 표현하기 위해 적합하다.
Composite 패턴 : 자식과 부모가 동일한 인터페이스를 구현하고, 부모는 자식의 구현을 조합(예를 들면 순회 등)을 통해서 인터페이스를 구현한다.
